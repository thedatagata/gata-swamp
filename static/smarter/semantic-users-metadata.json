{
  "table": "users_dim",
  "description": "User-level analytics with 254K users from November 2023 to November 2025",
  "fields": {
    "cookie_id": {"description": "Unique user identifier", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "identifier", "members": null},
    "first_session_date": {"description": "Date of first session", "md_data_type": "TIMESTAMP", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "last_session_date": {"description": "Date of most recent session", "md_data_type": "TIMESTAMP", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "first_session_time": {"description": "Timestamp of first session", "md_data_type": "TIMESTAMP WITH TIME ZONE", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "last_session_time": {"description": "Timestamp of most recent session", "md_data_type": "TIMESTAMP WITH TIME ZONE", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "days_active": {"description": "Number of days user was active", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "days_since_last_session": {"description": "Days since user's last session", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_sessions": {"description": "Total number of sessions", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "session_frequency": {"description": "Session frequency metric", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "returning_sessions": {"description": "Count of returning sessions", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "first_traffic_source": {"description": "First touch traffic source", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["direct", "email", "facebook_organic", "facebook_paid", "google_organic", "google_paid"]},
    "first_traffic_source_type": {"description": "First touch traffic source type", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["email", "organic_traffic", "paid_ad_traffic", "returning"]},
    "is_currently_anonymous": {"description": "Whether user is currently anonymous", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "current_lifecycle_stage": {"description": "Current lifecycle stage", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["awareness", "consideration", "expansion", "interest", "trial"]},
    "current_plan_tier": {"description": "Current subscription plan tier", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["business", "enterprise", "premium", "starter"]},
    "highest_funnel_step_reached": {"description": "Highest funnel step reached", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "has_trial_signup": {"description": "Whether user has signed up for trial", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "is_paying_customer": {"description": "Whether user is paying customer", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "has_reached_activation": {"description": "Whether user has reached activation", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "has_purchased_plan": {"description": "Whether user has purchased a plan", "md_data_type": "BOOLEAN", "ingest_data_type": "boolean", "sanitize": false, "data_type_category": "categorical", "members": [false, true]},
    "reached_awareness": {"description": "Whether user reached awareness stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_interest": {"description": "Whether user reached interest stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_consideration": {"description": "Whether user reached consideration stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_trial": {"description": "Whether user reached trial stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_expansion": {"description": "Whether user reached expansion stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_retention": {"description": "Whether user reached retention stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "total_funnel_conversions": {"description": "Total funnel conversion count", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "lifecycle_journey": {"description": "User's lifecycle journey path", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": null},
    "unique_stages_reached": {"description": "Number of unique lifecycle stages reached", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_interest_events": {"description": "Total interest stage events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_consideration_events": {"description": "Total consideration stage events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_trial_events": {"description": "Total trial stage events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_activation_events": {"description": "Total activation stage events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_retention_events": {"description": "Total retention events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_events": {"description": "Total lifetime events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "interest_active_sessions": {"description": "Sessions with interest activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "consideration_active_sessions": {"description": "Sessions with consideration activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "trial_active_sessions": {"description": "Sessions with trial activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "activation_active_sessions": {"description": "Sessions with activation activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "customer_active_sessions": {"description": "Sessions with customer activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "lifetime_revenue": {"description": "Total lifetime revenue", "md_data_type": "DOUBLE", "ingest_data_type": "number", "sanitize": false, "data_type_category": "continuous", "members": null},
    "events_30d": {"description": "Events in last 30 days", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "revenue_30d": {"description": "Revenue in last 30 days", "md_data_type": "DOUBLE", "ingest_data_type": "number", "sanitize": false, "data_type_category": "continuous", "members": null},
    "is_active_30d": {"description": "Whether user is active in last 30 days", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]}
  },  "dimensions": {
    "first_session_date": {"alias_name": "first_session_date", "transformation": null, "sort": "asc"},
    "last_session_date": {"alias_name": "last_session_date", "transformation": null, "sort": "desc"},
    "current_lifecycle_stage": {"alias_name": "max_lifecycle_stage_name", "transformation": null, "sort": "custom:awareness,interest,consideration,trial,expansion"},
    "current_plan_tier": {"alias_name": "current_plan_tier", "transformation": "CASE WHEN current_plan_tier = '' OR current_plan_tier IS NULL THEN 'No Plan' ELSE current_plan_tier END", "sort": "custom:starter,business,premium,enterprise"},
    "first_traffic_source": {"alias_name": "first_touch_utm_source", "transformation": null, "sort": "desc"},
    "first_traffic_source_type": {"alias_name": "first_traffic_source_type", "transformation": null, "sort": "desc"},
    "highest_funnel_step_reached": {"alias_name": "highest_funnel_step", "transformation": null, "sort": "asc"},
    "unique_stages_reached": {"alias_name": "unique_stages_reached", "transformation": null, "sort": "asc"},
    "days_since_last_session": {"alias_name": "days_since_last_session", "transformation": null, "sort": "asc"},
    "days_active": {"alias_name": "days_active", "transformation": null, "sort": "desc"},
    "is_currently_anonymous": {"alias_name": "user_identity_status", "transformation": "CASE WHEN is_currently_anonymous = 1 THEN 'Anonymous' ELSE 'Identified' END", "sort": "none"},
    "has_trial_signup": {"alias_name": "trial_signup_status", "transformation": "CASE WHEN has_trial_signup = 1 THEN 'Signed Up' ELSE 'No Signup' END", "sort": "none"},
    "is_paying_customer": {"alias_name": "customer_type", "transformation": "CASE WHEN is_paying_customer = 1 THEN 'Paying' ELSE 'Free' END", "sort": "desc"},
    "has_reached_activation": {"alias_name": "activation_status", "transformation": "CASE WHEN has_reached_activation = 1 THEN 'Activated' ELSE 'Not Activated' END", "sort": "none"},
    "has_purchased_plan": {"alias_name": "plan_purchase_status", "transformation": "CASE WHEN has_purchased_plan = true THEN 'Purchased' ELSE 'Not Purchased' END", "sort": "none"},
    "is_active_30d": {"alias_name": "active_status_30d", "transformation": "CASE WHEN is_active_30d = 1 THEN 'Active' ELSE 'Inactive' END", "sort": "desc"}
  },  "measures": {
    "cookie_id": {
      "aggregations": [],
      "formula": {
        "unique_users": {
          "sql": "COUNT(DISTINCT cookie_id)",
          "format": "number",
          "decimals": 0,
          "description": "Total Unique User Count"
        }
      }
    },
    "total_sessions": {
      "aggregations": [
        {"sum": {"alias": "total_sessions", "format": "number", "decimals": 0}},
        {"avg": {"alias": "avg_sessions_per_user", "format": "number", "decimals": 1}}
      ],
      "formula": null,
      "description": "Session metrics"
    },
    "days_active": {
      "aggregations": [
        {"sum": {"alias": "total_days_active", "format": "number", "decimals": 0}},
        {"avg": {"alias": "avg_days_active", "format": "number", "decimals": 1}}
      ],
      "formula": null,
      "description": "Activity duration metrics"
    },
    "lifetime_revenue": {
      "aggregations": [
        {"sum": {"alias": "total_lifetime_revenue", "format": "currency", "currency": "USD", "decimals": 2}},
        {"avg": {"alias": "avg_revenue_per_user", "format": "currency", "currency": "USD", "decimals": 2}}
      ],
      "formula": null,
      "description": "Revenue metrics"
    },
    "events_30d": {
      "aggregations": [
        {"sum": {"alias": "total_events_30d", "format": "number", "decimals": 0}},
        {"avg": {"alias": "avg_events_30d", "format": "number", "decimals": 1}}
      ],
      "formula": null,
      "description": "30-day event metrics"
    },
    "revenue_30d": {
      "aggregations": [
        {"sum": {"alias": "total_revenue_30d", "format": "currency", "currency": "USD", "decimals": 2}},
        {"avg": {"alias": "avg_revenue_30d", "format": "currency", "currency": "USD", "decimals": 2}}
      ],
      "formula": null,
      "description": "30-day revenue metrics"
    },
    "total_events": {
      "aggregations": [
        {"sum": {"alias": "total_all_events", "format": "number", "decimals": 0}},
        {"avg": {"alias": "avg_total_events", "format": "number", "decimals": 1}}
      ],
      "formula": null,
      "description": "Total event metrics"
    },
    "is_active_30d": {
      "aggregations": [],
      "formula": {
        "total_active_30d": {
          "sql": "SUM(CASE WHEN is_active_30d = 1 THEN 1 ELSE 0 END)",
          "format": "number",
          "decimals": 0,
          "description": "Total users active in last 30 days"
        },
        "active_30d_rate": {
          "sql": "AVG(CASE WHEN is_active_30d = 1 THEN 100.0 ELSE 0.0 END)",
          "format": "percentage",
          "decimals": 1,
          "description": "Percentage of users active in last 30 days"
        }
      }
    },
    "has_trial_signup": {
      "aggregations": [],
      "formula": {
        "trial_signup_rate": {
          "sql": "AVG(CASE WHEN has_trial_signup = 1 THEN 100.0 ELSE 0.0 END)",
          "format": "percentage",
          "decimals": 1,
          "description": "Trial signup conversion rate"
        },
        "total_trial_signups": {
          "sql": "SUM(CASE WHEN has_trial_signup = 1 THEN 1 ELSE 0 END)",
          "format": "number",
          "decimals": 0,
          "description": "Total users with trial signup"
        }
      }
    },
    "is_paying_customer": {
      "aggregations": [],
      "formula": {
        "paying_customer_rate": {
          "sql": "AVG(CASE WHEN is_paying_customer = 1 THEN 100.0 ELSE 0.0 END)",
          "format": "percentage",
          "decimals": 1,
          "description": "Paying customer conversion rate"
        },
        "total_paying_customers": {
          "sql": "SUM(CASE WHEN is_paying_customer = 1 THEN 1 ELSE 0 END)",
          "format": "number",
          "decimals": 0,
          "description": "Total paying customers"
        }
      }
    },
    "has_reached_activation": {
      "aggregations": [],
      "formula": {
        "activation_rate": {
          "sql": "AVG(CASE WHEN has_reached_activation = 1 THEN 100.0 ELSE 0.0 END)",
          "format": "percentage",
          "decimals": 1,
          "description": "User activation rate"
        },
        "total_activated_users": {
          "sql": "SUM(CASE WHEN has_reached_activation = 1 THEN 1 ELSE 0 END)",
          "format": "number",
          "decimals": 0,
          "description": "Total activated users"
        }
      }
    }
  }
}