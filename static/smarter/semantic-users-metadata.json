{
  "table": "users_dim",
  "description": "User-level analytics from amplitude.users_pivot_src (materialized as users_dim) with 254K users",
  "fields": {
    "cookie_id": {"description": "Unique user identifier", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "identifier", "members": null},
    "first_session_date": {"description": "Date of first session", "md_data_type": "TIMESTAMP", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "last_session_date": {"description": "Date of most recent session", "md_data_type": "TIMESTAMP", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "first_session_time": {"description": "Timestamp of first session", "md_data_type": "TIMESTAMP WITH TIME ZONE", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "last_session_time": {"description": "Timestamp of most recent session", "md_data_type": "TIMESTAMP WITH TIME ZONE", "ingest_data_type": "timestamp", "sanitize": false, "data_type_category": "temporal", "members": null},
    "days_active": {"description": "Number of days user was active", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "days_since_last_session": {"description": "Days since user's last session", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_sessions": {"description": "Total number of sessions", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "session_frequency": {"description": "Session frequency metric", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "returning_sessions": {"description": "Count of returning sessions", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "first_traffic_source": {"description": "First touch traffic source", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["direct", "email", "facebook_organic", "facebook_paid", "google_organic", "google_paid"]},
    "first_traffic_source_type": {"description": "First touch traffic source type", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["email", "organic_traffic", "paid_ad_traffic", "returning"]},
    "is_currently_anonymous": {"description": "Whether user is currently anonymous", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "current_lifecycle_stage": {"description": "Current lifecycle stage", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["activation", "awareness", "consideration", "retention"]},
    "current_plan_tier": {"description": "Current subscription plan tier", "md_data_type": "VARCHAR", "ingest_data_type": "string", "sanitize": false, "data_type_category": "categorical", "members": ["business", "enterprise", "no_plan", "starter"]},
    "highest_funnel_step_reached": {"description": "Highest funnel step reached (1=awareness, 2=consideration, 3=activation, 4=retention)", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": [1, 2, 3, 4]},
    "has_trial_signup": {"description": "Whether user has signed up for trial", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "is_paying_customer": {"description": "Whether user is paying customer", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "has_purchased_plan": {"description": "Whether user has purchased a plan", "md_data_type": "BOOLEAN", "ingest_data_type": "boolean", "sanitize": false, "data_type_category": "categorical", "members": [false, true]},
    "reached_awareness": {"description": "Whether user reached awareness stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_consideration": {"description": "Whether user reached consideration stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_activation": {"description": "Whether user reached activation stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "reached_retention": {"description": "Whether user reached retention stage", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]},
    "total_consideration_events": {"description": "Total consideration stage events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_activation_events": {"description": "Total activation stage events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_retention_events": {"description": "Total retention events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "total_events": {"description": "Total lifetime events", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "consideration_active_sessions": {"description": "Sessions with consideration activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "activation_active_sessions": {"description": "Sessions with activation activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "customer_active_sessions": {"description": "Sessions with customer activity", "md_data_type": "HUGEINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "lifetime_revenue": {"description": "Total lifetime revenue", "md_data_type": "DOUBLE", "ingest_data_type": "number", "sanitize": false, "data_type_category": "continuous", "members": null},
    "events_30d": {"description": "Events in last 30 days", "md_data_type": "BIGINT", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "numerical", "members": null},
    "revenue_30d": {"description": "Revenue in last 30 days", "md_data_type": "DOUBLE", "ingest_data_type": "number", "sanitize": false, "data_type_category": "continuous", "members": null},
    "is_active_30d": {"description": "Whether user is active in last 30 days", "md_data_type": "INTEGER", "ingest_data_type": "integer", "sanitize": false, "data_type_category": "categorical", "members": [0, 1]}
  },
  "dimensions": {
    "first_session_date": {"alias_name": "first_session_date", "transformation": null},
    "last_session_date": {"alias_name": "last_session_date", "transformation": null},
    "current_lifecycle_stage": {"alias_name": "current_lifecycle_stage", "transformation": null},
    "current_plan_tier": {"alias_name": "current_plan_tier", "transformation": null},
    "first_traffic_source": {"alias_name": "first_traffic_source", "transformation": null},
    "first_traffic_source_type": {"alias_name": "first_traffic_source_type", "transformation": null},
    "highest_funnel_step_reached": {"alias_name": "highest_funnel_step_reached", "transformation": null},
    "days_since_last_session": {"alias_name": "days_since_last_session", "transformation": null},
    "days_active": {"alias_name": "days_active", "transformation": null},
    "is_currently_anonymous": {"alias_name": "user_identity", "transformation": "CASE WHEN is_currently_anonymous = 1 THEN 'Anonymous' ELSE 'Identified' END"},
    "has_trial_signup": {"alias_name": "trial_status", "transformation": "CASE WHEN has_trial_signup = 1 THEN 'Signed Up' ELSE 'No Signup' END"},
    "is_paying_customer": {"alias_name": "customer_type", "transformation": "CASE WHEN is_paying_customer = 1 THEN 'Paying' ELSE 'Free' END"},
    "has_purchased_plan": {"alias_name": "purchase_status", "transformation": "CASE WHEN has_purchased_plan = true THEN 'Purchased' ELSE 'Not Purchased' END"},
    "is_active_30d": {"alias_name": "recent_activity", "transformation": "CASE WHEN is_active_30d = 1 THEN 'Active' ELSE 'Inactive' END"},
    "reached_awareness": {"alias_name": "awareness_status", "transformation": "CASE WHEN reached_awareness = 1 THEN 'Reached' ELSE 'Not Reached' END"},
    "reached_consideration": {"alias_name": "consideration_status", "transformation": "CASE WHEN reached_consideration = 1 THEN 'Reached' ELSE 'Not Reached' END"},
    "reached_activation": {"alias_name": "activation_status", "transformation": "CASE WHEN reached_activation = 1 THEN 'Reached' ELSE 'Not Reached' END"},
    "reached_retention": {"alias_name": "retention_status", "transformation": "CASE WHEN reached_retention = 1 THEN 'Reached' ELSE 'Not Reached' END"}
  },
  "measures": {
    "cookie_id": {"aggregations": [], "formula": {"unique_users": {"sql": "COUNT(DISTINCT cookie_id)", "format": "number", "decimals": 0, "description": "FORMULA: Total unique user count"}}},
    "total_sessions": {"aggregations": [{"sum": {"alias": "total_sessions_sum", "format": "number", "decimals": 0, "description": "SUM: Total sessions across all users"}}, {"avg": {"alias": "total_sessions_avg", "format": "number", "decimals": 1, "description": "AVG: Average sessions per user"}}], "formula": null},
    "returning_sessions": {"aggregations": [{"sum": {"alias": "returning_sessions_sum", "format": "number", "decimals": 0, "description": "SUM: Total returning sessions across all users"}}, {"avg": {"alias": "returning_sessions_avg", "format": "number", "decimals": 1, "description": "AVG: Average returning sessions per user"}}], "formula": null},
    "days_active": {"aggregations": [{"sum": {"alias": "days_active_sum", "format": "number", "decimals": 0, "description": "SUM: Total active days across all users"}}, {"avg": {"alias": "days_active_avg", "format": "number", "decimals": 1, "description": "AVG: Average active days per user"}}], "formula": null},
    "days_since_last_session": {"aggregations": [{"avg": {"alias": "avg_days_since_last_session", "format": "number", "decimals": 1, "description": "AVG: Average days since last session"}}], "formula": null},
    "lifetime_revenue": {"aggregations": [{"sum": {"alias": "total_lifetime_revenue", "format": "currency", "currency": "USD", "decimals": 2, "description": "SUM: Total lifetime revenue across all users"}}, {"avg": {"alias": "avg_revenue_per_user", "format": "currency", "currency": "USD", "decimals": 2, "description": "AVG: Average lifetime revenue per user"}}], "formula": null},
    "events_30d": {"aggregations": [{"sum": {"alias": "total_events_30d", "format": "number", "decimals": 0, "description": "SUM: Total events in last 30 days across all users"}}, {"avg": {"alias": "avg_events_30d", "format": "number", "decimals": 1, "description": "AVG: Average events per user in last 30 days"}}], "formula": null},
    "revenue_30d": {"aggregations": [{"sum": {"alias": "total_revenue_30d", "format": "currency", "currency": "USD", "decimals": 2, "description": "SUM: Total revenue in last 30 days across all users"}}, {"avg": {"alias": "avg_revenue_30d", "format": "currency", "currency": "USD", "decimals": 2, "description": "AVG: Average revenue per user in last 30 days"}}], "formula": null},
    "total_events": {"aggregations": [{"sum": {"alias": "total_all_events", "format": "number", "decimals": 0, "description": "SUM: Total lifetime events across all users"}}, {"avg": {"alias": "avg_total_events", "format": "number", "decimals": 1, "description": "AVG: Average lifetime events per user"}}], "formula": null},
    "total_consideration_events": {"aggregations": [{"sum": {"alias": "sum_consideration_events", "format": "number", "decimals": 0, "description": "SUM: Total consideration events across all users"}}, {"avg": {"alias": "avg_consideration_events", "format": "number", "decimals": 1, "description": "AVG: Average consideration events per user"}}], "formula": null},
    "total_activation_events": {"aggregations": [{"sum": {"alias": "sum_activation_events", "format": "number", "decimals": 0, "description": "SUM: Total activation events across all users"}}, {"avg": {"alias": "avg_activation_events", "format": "number", "decimals": 1, "description": "AVG: Average activation events per user"}}], "formula": null},
    "total_retention_events": {"aggregations": [{"sum": {"alias": "sum_retention_events", "format": "number", "decimals": 0, "description": "SUM: Total retention events across all users"}}, {"avg": {"alias": "avg_retention_events", "format": "number", "decimals": 1, "description": "AVG: Average retention events per user"}}], "formula": null},
    "consideration_active_sessions": {"aggregations": [{"sum": {"alias": "sum_consideration_active_sessions", "format": "number", "decimals": 0, "description": "SUM: Total consideration active sessions across all users"}}, {"avg": {"alias": "avg_consideration_active_sessions", "format": "number", "decimals": 1, "description": "AVG: Average consideration active sessions per user"}}], "formula": null},
    "activation_active_sessions": {"aggregations": [{"sum": {"alias": "sum_activation_active_sessions", "format": "number", "decimals": 0, "description": "SUM: Total activation active sessions across all users"}}, {"avg": {"alias": "avg_activation_active_sessions", "format": "number", "decimals": 1, "description": "AVG: Average activation active sessions per user"}}], "formula": null},
    "customer_active_sessions": {"aggregations": [{"sum": {"alias": "sum_customer_active_sessions", "format": "number", "decimals": 0, "description": "SUM: Total customer active sessions across all users"}}, {"avg": {"alias": "avg_customer_active_sessions", "format": "number", "decimals": 1, "description": "AVG: Average customer active sessions per user"}}], "formula": null},
    "is_active_30d": {"aggregations": [], "formula": {"active_users_30d": {"sql": "SUM(CASE WHEN days_since_last_session BETWEEN 1 AND 30 THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Total users active in last 30 days"}, "active_rate_30d": {"sql": "AVG(CASE WHEN days_since_last_session BETWEEN 1 AND 30 THEN 100.0 ELSE 0.0 END)", "format": "percentage", "decimals": 1, "description": "FORMULA: Percentage of users active in last 30 days"}}},
    "has_trial_signup": {"aggregations": [], "formula": {"trial_signup_rate": {"sql": "AVG(CASE WHEN has_trial_signup = 1 THEN 100.0 ELSE 0.0 END)", "format": "percentage", "decimals": 1, "description": "FORMULA: Trial signup conversion rate"}, "total_trial_signups": {"sql": "SUM(CASE WHEN has_trial_signup = 1 THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Total users with trial signup"}}},
    "is_paying_customer": {"aggregations": [], "formula": {"paying_customer_rate": {"sql": "AVG(CASE WHEN is_paying_customer = 1 THEN 100.0 ELSE 0.0 END)", "format": "percentage", "decimals": 1, "description": "FORMULA: Paying customer conversion rate"}, "total_paying_customers": {"sql": "SUM(CASE WHEN is_paying_customer = 1 THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Total paying customers"}}},
    "reached_awareness": {"aggregations": [], "formula": {"total_reached_awareness": {"sql": "SUM(CASE WHEN reached_awareness = 1 THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Total users who reached awareness stage"}, "reached_awareness_rate": {"sql": "AVG(CASE WHEN reached_awareness = 1 THEN 100.0 ELSE 0.0 END)", "format": "percentage", "decimals": 1, "description": "FORMULA: Percentage of users who reached awareness stage"}}},
    "reached_consideration": {"aggregations": [], "formula": {"total_reached_consideration": {"sql": "SUM(CASE WHEN reached_consideration = 1 THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Total users who reached consideration stage"}, "reached_consideration_rate": {"sql": "AVG(CASE WHEN reached_consideration = 1 THEN 100.0 ELSE 0.0 END)", "format": "percentage", "decimals": 1, "description": "FORMULA: Percentage of users who reached consideration stage"}}},
    "reached_activation": {"aggregations": [], "formula": {"total_reached_activation": {"sql": "SUM(CASE WHEN reached_activation = 1 THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Total users who reached activation stage"}, "reached_activation_rate": {"sql": "AVG(CASE WHEN reached_activation = 1 THEN 100.0 ELSE 0.0 END)", "format": "percentage", "decimals": 1, "description": "FORMULA: Percentage of users who reached activation stage"}}},
    "reached_retention": {"aggregations": [], "formula": {"total_reached_retention": {"sql": "SUM(CASE WHEN reached_retention = 1 THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Total users who reached retention stage"}, "reached_retention_rate": {"sql": "AVG(CASE WHEN reached_retention = 1 THEN 100.0 ELSE 0.0 END)", "format": "percentage", "decimals": 1, "description": "FORMULA: Percentage of users who reached retention stage"}}},
    "first_traffic_source": {"aggregations": [], "formula": {"direct_users": {"sql": "SUM(CASE WHEN first_traffic_source = 'direct' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from direct traffic"}, "email_users": {"sql": "SUM(CASE WHEN first_traffic_source = 'email' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from email"}, "facebook_organic_users": {"sql": "SUM(CASE WHEN first_traffic_source = 'facebook_organic' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from organic Facebook"}, "facebook_paid_users": {"sql": "SUM(CASE WHEN first_traffic_source = 'facebook_paid' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from paid Facebook ads"}, "google_organic_users": {"sql": "SUM(CASE WHEN first_traffic_source = 'google_organic' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from organic Google search"}, "google_paid_users": {"sql": "SUM(CASE WHEN first_traffic_source = 'google_paid' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from paid Google ads"}}},
    "first_traffic_source_type": {"aggregations": [], "formula": {"email_type_users": {"sql": "SUM(CASE WHEN first_traffic_source_type = 'email' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from email traffic type"}, "organic_traffic_users": {"sql": "SUM(CASE WHEN first_traffic_source_type = 'organic_traffic' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from organic traffic"}, "paid_ad_traffic_users": {"sql": "SUM(CASE WHEN first_traffic_source_type = 'paid_ad_traffic' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users from paid ad traffic"}, "returning_users": {"sql": "SUM(CASE WHEN first_traffic_source_type = 'returning' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Returning users"}}},
    "current_plan_tier": {"aggregations": [], "formula": {"no_plan_users": {"sql": "SUM(CASE WHEN current_plan_tier = 'no_plan' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users with no plan"}, "starter_plan_users": {"sql": "SUM(CASE WHEN current_plan_tier = 'starter' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users on starter plan"}, "business_plan_users": {"sql": "SUM(CASE WHEN current_plan_tier = 'business' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users on business plan"}, "enterprise_plan_users": {"sql": "SUM(CASE WHEN current_plan_tier = 'enterprise' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users on enterprise plan"}}},
    "current_lifecycle_stage": {"aggregations": [], "formula": {"awareness_users": {"sql": "SUM(CASE WHEN current_lifecycle_stage = 'awareness' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users in awareness stage"}, "consideration_users": {"sql": "SUM(CASE WHEN current_lifecycle_stage = 'consideration' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users in consideration stage"}, "activation_users": {"sql": "SUM(CASE WHEN current_lifecycle_stage = 'activation' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users in activation stage"}, "retention_users": {"sql": "SUM(CASE WHEN current_lifecycle_stage = 'retention' THEN 1 ELSE 0 END)", "format": "number", "decimals": 0, "description": "FORMULA: Users in retention stage"}}}
  }
}