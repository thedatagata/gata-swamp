{
  "table": "sessions_pivot_src",
  "description": "Enriched session-level analytics with 13.7K sessions including lifecycle stages, funnel progression, and event tracking",
  "fields": {
    "session_id": {
      "description": "Unique session identifier",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "nominal",
      "members": null,
      "group": null,
      "parent": false
    },
    "cookie_id": {
      "description": "Cookie identifier for cross-session tracking",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "nominal",
      "members": null,
      "group": null,
      "parent": false
    },
    "session_start_time": {
      "description": "Session start timestamp",
      "md_data_type": "TIMESTAMP",
      "ingest_data_type": "timestamp",
      "sanitize": false,
      "data_type_category": "continuous",
      "members": null,
      "group": "temporal",
      "parent": true
    },
    "session_date": {
      "description": "Session date",
      "md_data_type": "DATE",
      "ingest_data_type": "date",
      "sanitize": false,
      "data_type_category": "ordinal",
      "members": null,
      "group": "temporal",
      "parent": false
    },
    "session_month_name": {
      "description": "Month name of session",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
      "group": "temporal",
      "parent": false
    },
    "session_weekday_name": {
      "description": "Weekday name of session",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
      "group": "temporal",
      "parent": false
    },
    "session_sequence_number": {
      "description": "Session number for this cookie (1-11)",
      "md_data_type": "INTEGER",
      "ingest_data_type": "integer",
      "sanitize": false,
      "data_type_category": "discrete",
      "members": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
      "group": null,
      "parent": false
    },
    "traffic_source": {
      "description": "Traffic source",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": ["direct", "google_paid", "newsletter", "social", "organic", "referral"],
      "group": "marketing_channel",
      "parent": true
    },
    "traffic_source_type": {
      "description": "Traffic source classification",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": ["email", "paid", "returning_or_wordofmouth_traffic", "organic"],
      "group": "marketing_channel",
      "parent": false
    },
    "is_anonymous": {
      "description": "Whether user is anonymous (no signup)",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "user_status",
      "parent": false
    },
    "trial_signup": {
      "description": "Whether user signed up for trial",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "conversion",
      "parent": false
    },
    "paying_customer": {
      "description": "Whether user is a paying customer",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "conversion",
      "parent": false
    },
    "max_funnel_step": {
      "description": "Furthest funnel step reached (1-7)",
      "md_data_type": "INTEGER",
      "ingest_data_type": "integer",
      "sanitize": false,
      "data_type_category": "ordinal",
      "members": [1, 2, 3, 4, 5, 6, 7],
      "group": "funnel",
      "parent": false
    },
    "max_lifecycle_stage": {
      "description": "Furthest lifecycle stage reached",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "ordinal",
      "members": ["awareness", "interest", "consideration", "trial", "activation"],
      "group": "lifecycle",
      "parent": true
    },
    "active_interest_session": {
      "description": "Whether session had interest-stage activity",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "lifecycle",
      "parent": false
    },
    "active_consideration_session": {
      "description": "Whether session had consideration-stage activity",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "lifecycle",
      "parent": false
    },
    "active_trial_session": {
      "description": "Whether session had trial-stage activity",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "lifecycle",
      "parent": false
    },
    "activation_stage_reached": {
      "description": "Whether session reached activation",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "conversion",
      "parent": false
    },
    "active_activation_session": {
      "description": "Whether session had activation-stage activity",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "lifecycle",
      "parent": false
    },
    "purchased_plan": {
      "description": "Whether user purchased a plan",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "conversion",
      "parent": false
    },
    "plan_tier": {
      "description": "Subscription plan tier",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "ordinal",
      "members": ["", "starter", "business", "premium", "enterprise"],
      "group": "monetization",
      "parent": false
    },
    "active_customer_session": {
      "description": "Whether session was from active customer",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "user_status",
      "parent": false
    },
    "lifecycle_stage_conversion_session": {
      "description": "Whether session resulted in lifecycle stage conversion",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "conversion",
      "parent": false
    },
    "lifecycle_stage_converted_to": {
      "description": "Lifecycle stage converted to in this session",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": ["awareness", "interest", "consideration", "trial", "activation"],
      "group": "lifecycle",
      "parent": false
    },
    "is_returning_user": {
      "description": "Whether user is returning (session_sequence_number > 1)",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "user_status",
      "parent": false
    },
    "session_revenue": {
      "description": "Revenue generated in this session",
      "md_data_type": "DECIMAL",
      "ingest_data_type": "number",
      "sanitize": false,
      "data_type_category": "continuous",
      "members": null,
      "group": "monetization",
      "parent": false
    },
    "interest_events": {
      "description": "Count of interest stage events in session",
      "md_data_type": "BIGINT",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "discrete",
      "members": null,
      "group": "event_counts",
      "parent": false
    },
    "consideration_events": {
      "description": "Count of consideration stage events in session",
      "md_data_type": "BIGINT",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "discrete",
      "members": null,
      "group": "event_counts",
      "parent": false
    },
    "trial_events": {
      "description": "Count of trial stage events in session",
      "md_data_type": "BIGINT",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "discrete",
      "members": null,
      "group": "event_counts",
      "parent": false
    },
    "activation_events": {
      "description": "Count of activation stage events in session",
      "md_data_type": "BIGINT",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "discrete",
      "members": null,
      "group": "event_counts",
      "parent": false
    },
    "retention_events": {
      "description": "Count of retention events in session",
      "md_data_type": "BIGINT",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "discrete",
      "members": null,
      "group": "event_counts",
      "parent": false
    },
    "total_events": {
      "description": "Total count of all events in session",
      "md_data_type": "BIGINT",
      "ingest_data_type": "Uint8Array",
      "sanitize": true,
      "data_type_category": "discrete",
      "members": null,
      "group": "event_counts",
      "parent": false
    }
  },
  "dimensions": {
    "session_date": {
      "column": "session_date",
      "transformation": null,
      "filter": "session_date >= CURRENT_DATE - INTERVAL '90 days'",
      "sort": "asc"
    },
    "session_month_name": {
      "column": "session_month_name",
      "transformation": null,
      "filter": null,
      "sort": "none"
    },
    "session_weekday_name": {
      "column": "session_weekday_name",
      "transformation": null,
      "filter": null,
      "sort": "none"
    },
    "traffic_source": {
      "column": "traffic_source",
      "transformation": null,
      "filter": null,
      "sort": "desc"
    },
    "traffic_source_type": {
      "column": "traffic_source_type",
      "transformation": null,
      "filter": null,
      "sort": "desc"
    },
    "max_lifecycle_stage": {
      "column": "max_lifecycle_stage",
      "transformation": null,
      "filter": null,
      "sort": "custom:awareness,interest,consideration,trial,activation"
    },
    "plan_tier": {
      "column": "plan_tier",
      "transformation": null,
      "filter": "plan_tier != '' AND plan_tier IS NOT NULL",
      "sort": "custom:starter,business,premium,enterprise"
    },
    "session_sequence_number": {
      "column": "session_sequence_number",
      "transformation": null,
      "filter": null,
      "sort": "asc"
    },
    "is_anonymous_label": {
      "column": "is_anonymous",
      "transformation": "CASE WHEN is_anonymous = 1 THEN 'Anonymous' ELSE 'Identified' END",
      "filter": null,
      "sort": "none"
    },
    "trial_signup_label": {
      "column": "trial_signup",
      "transformation": "CASE WHEN trial_signup = 1 THEN 'Signed Up' ELSE 'No Signup' END",
      "filter": null,
      "sort": "none"
    },
    "paying_customer_label": {
      "column": "paying_customer",
      "transformation": "CASE WHEN paying_customer = 1 THEN 'Paying' ELSE 'Free' END",
      "filter": null,
      "sort": "none"
    },
    "is_returning_user_label": {
      "column": "is_returning_user",
      "transformation": "CASE WHEN is_returning_user = 1 THEN 'Returning' ELSE 'New' END",
      "filter": null,
      "sort": "none"
    }
  },
  "measures": {
    "session_count": {
      "column": null,
      "aggregations": ["count"],
      "formula": "COUNT(*)",
      "description": "Total number of sessions",
      "format": "number",
      "decimals": 0
    },
    "unique_visitors": {
      "column": "cookie_id",
      "aggregations": ["count_distinct"],
      "formula": "COUNT(DISTINCT cookie_id)",
      "description": "Unique visitors by cookie",
      "format": "number",
      "decimals": 0
    },
    "total_revenue": {
      "column": "session_revenue",
      "aggregations": ["sum"],
      "formula": "SUM(session_revenue)",
      "description": "Total revenue across all sessions",
      "format": "currency",
      "currency": "USD",
      "decimals": 2
    },
    "avg_revenue_per_session": {
      "column": "session_revenue",
      "aggregations": ["avg"],
      "formula": "AVG(session_revenue)",
      "description": "Average revenue per session",
      "format": "currency",
      "currency": "USD",
      "decimals": 2
    },
    "avg_funnel_step": {
      "column": "max_funnel_step",
      "aggregations": ["avg"],
      "formula": "AVG(max_funnel_step)",
      "description": "Average funnel progression",
      "format": "number",
      "decimals": 2
    },
    "interest_events": {
      "column": "interest_events",
      "aggregations": ["sum", "avg"],
      "formula": "SUM(interest_events)",
      "description": "Total interest stage events",
      "format": "number",
      "decimals": 0
    },
    "consideration_events": {
      "column": "consideration_events",
      "aggregations": ["sum", "avg"],
      "formula": "SUM(consideration_events)",
      "description": "Total consideration stage events",
      "format": "number",
      "decimals": 0
    },
    "trial_events": {
      "column": "trial_events",
      "aggregations": ["sum", "avg"],
      "formula": "SUM(trial_events)",
      "description": "Total trial stage events",
      "format": "number",
      "decimals": 0
    },
    "activation_events": {
      "column": "activation_events",
      "aggregations": ["sum", "avg"],
      "formula": "SUM(activation_events)",
      "description": "Total activation stage events",
      "format": "number",
      "decimals": 0
    },
    "retention_events": {
      "column": "retention_events",
      "aggregations": ["sum", "avg"],
      "formula": "SUM(retention_events)",
      "description": "Total retention events",
      "format": "number",
      "decimals": 0
    },
    "total_events": {
      "column": "total_events",
      "aggregations": ["sum", "avg"],
      "formula": "SUM(total_events)",
      "description": "Total events across all stages",
      "format": "number",
      "decimals": 0
    },
    "avg_events_per_session": {
      "column": "total_events",
      "aggregations": ["avg"],
      "formula": "AVG(total_events)",
      "description": "Average events per session",
      "format": "number",
      "decimals": 1
    },
    "trial_signup_rate": {
      "column": "trial_signup",
      "aggregations": ["avg"],
      "formula": "AVG(CASE WHEN trial_signup = 1 THEN 100.0 ELSE 0.0 END)",
      "description": "Percentage of sessions with trial signup",
      "format": "percentage",
      "decimals": 1
    },
    "activation_rate": {
      "column": "activation_stage_reached",
      "aggregations": ["avg"],
      "formula": "AVG(CASE WHEN activation_stage_reached = 1 THEN 100.0 ELSE 0.0 END)",
      "description": "Percentage of sessions reaching activation",
      "format": "percentage",
      "decimals": 1
    },
    "purchase_rate": {
      "column": "purchased_plan",
      "aggregations": ["avg"],
      "formula": "AVG(CASE WHEN purchased_plan = 1 THEN 100.0 ELSE 0.0 END)",
      "description": "Percentage of sessions with purchase",
      "format": "percentage",
      "decimals": 1
    },
    "paying_customer_rate": {
      "column": "paying_customer",
      "aggregations": ["avg"],
      "formula": "AVG(CASE WHEN paying_customer = 1 THEN 100.0 ELSE 0.0 END)",
      "description": "Percentage of sessions from paying customers",
      "format": "percentage",
      "decimals": 1
    },
    "anonymous_sessions": {
      "column": "is_anonymous",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN is_anonymous = 1 THEN 1 ELSE 0 END)",
      "description": "Count of anonymous sessions",
      "format": "number",
      "decimals": 0
    },
    "identified_sessions": {
      "column": "is_anonymous",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN is_anonymous = 0 THEN 1 ELSE 0 END)",
      "description": "Count of identified sessions",
      "format": "number",
      "decimals": 0
    },
    "new_visitor_sessions": {
      "column": "session_sequence_number",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN session_sequence_number = 1 THEN 1 ELSE 0 END)",
      "description": "Sessions from new visitors",
      "format": "number",
      "decimals": 0
    },
    "returning_visitor_sessions": {
      "column": "session_sequence_number",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN session_sequence_number > 1 THEN 1 ELSE 0 END)",
      "description": "Sessions from returning visitors",
      "format": "number",
      "decimals": 0
    },
    "new_vs_returning_ratio": {
      "column": "session_sequence_number",
      "aggregations": ["complex"],
      "formula": "CASE WHEN SUM(CASE WHEN session_sequence_number > 1 THEN 1 ELSE 0 END) > 0 THEN ROUND(1.0 * SUM(CASE WHEN session_sequence_number = 1 THEN 1 ELSE 0 END) / SUM(CASE WHEN session_sequence_number > 1 THEN 1 ELSE 0 END), 2) ELSE 0 END",
      "description": "Ratio of new to returning visitors",
      "format": "number",
      "decimals": 2
    },
    "active_interest_sessions": {
      "column": "active_interest_session",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN active_interest_session = 1 THEN 1 ELSE 0 END)",
      "description": "Sessions with interest activity",
      "format": "number",
      "decimals": 0
    },
    "active_consideration_sessions": {
      "column": "active_consideration_session",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN active_consideration_session = 1 THEN 1 ELSE 0 END)",
      "description": "Sessions with consideration activity",
      "format": "number",
      "decimals": 0
    },
    "active_trial_sessions": {
      "column": "active_trial_session",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN active_trial_session = 1 THEN 1 ELSE 0 END)",
      "description": "Sessions with trial activity",
      "format": "number",
      "decimals": 0
    },
    "active_activation_sessions": {
      "column": "active_activation_session",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN active_activation_session = 1 THEN 1 ELSE 0 END)",
      "description": "Sessions with activation activity",
      "format": "number",
      "decimals": 0
    },
    "lifecycle_conversion_sessions": {
      "column": "lifecycle_stage_conversion_session",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN lifecycle_stage_conversion_session = 1 THEN 1 ELSE 0 END)",
      "description": "Sessions with lifecycle stage conversion",
      "format": "number",
      "decimals": 0
    },
    "lifecycle_conversion_rate": {
      "column": "lifecycle_stage_conversion_session",
      "aggregations": ["avg"],
      "formula": "AVG(CASE WHEN lifecycle_stage_conversion_session = 1 THEN 100.0 ELSE 0.0 END)",
      "description": "Percentage of sessions with lifecycle conversion",
      "format": "percentage",
      "decimals": 1
    },
    "avg_session_sequence": {
      "column": "session_sequence_number",
      "aggregations": ["avg"],
      "formula": "AVG(session_sequence_number)",
      "description": "Average session number per visitor",
      "format": "number",
      "decimals": 2
    },
    "max_session_sequence": {
      "column": "session_sequence_number",
      "aggregations": ["max"],
      "formula": "MAX(session_sequence_number)",
      "description": "Maximum session number observed",
      "format": "number",
      "decimals": 0
    }
  }
}
