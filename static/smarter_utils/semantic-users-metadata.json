{
  "table": "users_dim",
  "description": "User-level aggregated data with 234.8K users including activity, revenue, lifecycle, and attribution metrics",
  "fields": {
    "user_key": {
      "description": "Unique user identifier",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "nominal",
      "members": null,
      "group": null,
      "parent": false
    },
    "total_revenue": {
      "description": "Lifetime revenue",
      "md_data_type": "DOUBLE",
      "ingest_data_type": "number",
      "sanitize": false,
      "data_type_category": "continuous",
      "members": null,
      "group": "monetization",
      "parent": false
    },
    "current_plan_tier": {
      "description": "Current subscription plan",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "ordinal",
      "members": ["", "starter", "business", "premium", "enterprise"],
      "group": "monetization",
      "parent": false
    },
    "has_activated": {
      "description": "Activation reached",
      "md_data_type": "INTEGER",
      "ingest_data_type": "integer",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": [0, 1],
      "group": "lifecycle",
      "parent": false
    },
    "max_lifecycle_stage_name": {
      "description": "Lifecycle stage",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "ordinal",
      "members": ["activation", "awareness", "consideration", "interest", "retention", "trial"],
      "group": "lifecycle",
      "parent": true
    },
    "first_touch_utm_source": {
      "description": "First touch source",
      "md_data_type": "VARCHAR",
      "ingest_data_type": "string",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": ["direct", "google_paid", "newsletter", "organic", "referral", "social"],
      "group": "attribution",
      "parent": true
    },
    "is_active_7d": {
      "description": "Active last 7d",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "boolean",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": [false, true],
      "group": "recency",
      "parent": false
    },
    "is_active_30d": {
      "description": "Active last 30d",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "boolean",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": [false, true],
      "group": "recency",
      "parent": false
    },
    "is_paying_customer": {
      "description": "Has purchased",
      "md_data_type": "BOOLEAN",
      "ingest_data_type": "boolean",
      "sanitize": false,
      "data_type_category": "categorical",
      "members": [false, true],
      "group": "monetization",
      "parent": false
    },
    "total_events": {
      "description": "Lifetime events",
      "md_data_type": "BIGINT",
      "ingest_data_type": "integer",
      "sanitize": false,
      "data_type_category": "discrete",
      "members": null,
      "group": "engagement",
      "parent": false
    },
    "total_sessions": {
      "description": "Lifetime sessions",
      "md_data_type": "BIGINT",
      "ingest_data_type": "integer",
      "sanitize": false,
      "data_type_category": "discrete",
      "members": null,
      "group": "engagement",
      "parent": false
    },
    "revenue_30d": {
      "description": "Revenue last 30d",
      "md_data_type": "DOUBLE",
      "ingest_data_type": "number",
      "sanitize": false,
      "data_type_category": "continuous",
      "members": null,
      "group": "recency",
      "parent": false
    }
  },
  "dimensions": {
    "lifecycle_stage": {
      "column": "max_lifecycle_stage_name",
      "transformation": null,
      "filter": null,
      "sort": "custom:awareness,interest,consideration,trial,activation,retention"
    },
    "plan_tier": {
      "column": "current_plan_tier",
      "transformation": null,
      "filter": "current_plan_tier != '' AND current_plan_tier IS NOT NULL",
      "sort": "custom:starter,business,premium,enterprise"
    },
    "first_touch_source": {
      "column": "first_touch_utm_source",
      "transformation": null,
      "filter": null,
      "sort": "desc"
    },
    "active_status_30d": {
      "column": "is_active_30d",
      "transformation": "CASE WHEN is_active_30d THEN 'Active' ELSE 'Inactive' END",
      "filter": null,
      "sort": "desc"
    },
    "paying_status": {
      "column": "is_paying_customer",
      "transformation": "CASE WHEN is_paying_customer THEN 'Paying' ELSE 'Free' END",
      "filter": null,
      "sort": "desc"
    }
  },
  "measures": {
    "user_count": {
      "column": null,
      "aggregations": ["count"],
      "formula": "COUNT(*)",
      "description": "Total users",
      "format": "number",
      "decimals": 0
    },
    "total_revenue": {
      "column": "total_revenue",
      "aggregations": ["sum"],
      "formula": "SUM(total_revenue)",
      "description": "Total lifetime revenue",
      "format": "currency",
      "currency": "USD",
      "decimals": 2
    },
    "active_users_30d": {
      "column": "is_active_30d",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN is_active_30d THEN 1 ELSE 0 END)",
      "description": "Active users last 30d",
      "format": "number",
      "decimals": 0
    },
    "paying_customers": {
      "column": "is_paying_customer",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN is_paying_customer THEN 1 ELSE 0 END)",
      "description": "Paying customers",
      "format": "number",
      "decimals": 0
    },
    "activated_users": {
      "column": "has_activated",
      "aggregations": ["sum"],
      "formula": "SUM(CASE WHEN has_activated = 1 THEN 1 ELSE 0 END)",
      "description": "Activated users",
      "format": "number",
      "decimals": 0
    },
    "revenue_30d": {
      "column": "revenue_30d",
      "aggregations": ["sum"],
      "formula": "SUM(revenue_30d)",
      "description": "Revenue last 30d",
      "format": "currency",
      "currency": "USD",
      "decimals": 2
    }
  }
}
